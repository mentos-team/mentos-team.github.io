<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MentOS: /home/enrico/repository/personal/mentos/mentos/src/ipc/sem.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MentOS
   &#160;<span id="projectnumber">0.7.3</span>
   </div>
   <div id="projectbrief">The Mentoring Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b4d46abdb8cafe1ad6c14fa0f9992e34.html">mentos</a></li><li class="navelem"><a class="el" href="dir_d299fed5c83b024e8b5c525a233be574.html">src</a></li><li class="navelem"><a class="el" href="dir_2926cf71bc319202ff70f4df3ace22d0.html">ipc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sem.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsem__info__t.html">sem_info_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore management structure.  <a href="structsem__info__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae88fdea60e151933ce52a92938897dac"><td class="memItemLeft" align="right" valign="top"><a id="ae88fdea60e151933ce52a92938897dac"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#ae88fdea60e151933ce52a92938897dac">__DEBUG_HEADER__</a>&#160;&#160;&#160;&quot;[IPCsem]&quot;</td></tr>
<tr class="memdesc:ae88fdea60e151933ce52a92938897dac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change header. <br /></td></tr>
<tr class="separator:ae88fdea60e151933ce52a92938897dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785e7dc04a8b1423d105b10f7af0720c"><td class="memItemLeft" align="right" valign="top"><a id="a785e7dc04a8b1423d105b10f7af0720c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a785e7dc04a8b1423d105b10f7af0720c">__DEBUG_LEVEL__</a>&#160;&#160;&#160;<a class="el" href="kernel__levels_8h.html#a4377191d729d923509b6953555776d80">LOGLEVEL_NOTICE</a></td></tr>
<tr class="memdesc:a785e7dc04a8b1423d105b10f7af0720c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set log level. <br /></td></tr>
<tr class="separator:a785e7dc04a8b1423d105b10f7af0720c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a01bb52ef0602dd7096c0d08390018cc4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structsem__info__t.html">sem_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a01bb52ef0602dd7096c0d08390018cc4">__sem_info_alloc</a> (<a class="el" href="mentos_2inc_2sys_2types_8h.html#a99c5bd20241a4a2708237037a1857062">key_t</a> key, int nsems, int semflg)</td></tr>
<tr class="memdesc:a01bb52ef0602dd7096c0d08390018cc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates the memory for semaphore management structure.  <a href="sem_8c.html#a01bb52ef0602dd7096c0d08390018cc4">More...</a><br /></td></tr>
<tr class="separator:a01bb52ef0602dd7096c0d08390018cc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08d8b376ba8ab75543b6264ce0e3fe10"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a08d8b376ba8ab75543b6264ce0e3fe10">__sem_info_dealloc</a> (<a class="el" href="structsem__info__t.html">sem_info_t</a> *sem_info)</td></tr>
<tr class="memdesc:a08d8b376ba8ab75543b6264ce0e3fe10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory of a semaphore management structure.  <a href="sem_8c.html#a08d8b376ba8ab75543b6264ce0e3fe10">More...</a><br /></td></tr>
<tr class="separator:a08d8b376ba8ab75543b6264ce0e3fe10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc8cd2b2c56a6e77efa89dec3441698"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structsem__info__t.html">sem_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#adcc8cd2b2c56a6e77efa89dec3441698">__list_find_sem_info_by_id</a> (int semid)</td></tr>
<tr class="memdesc:adcc8cd2b2c56a6e77efa89dec3441698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for the semaphore with the given id.  <a href="sem_8c.html#adcc8cd2b2c56a6e77efa89dec3441698">More...</a><br /></td></tr>
<tr class="separator:adcc8cd2b2c56a6e77efa89dec3441698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4ed0c4d7c48efb688c63e42000b57e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structsem__info__t.html">sem_info_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a2e4ed0c4d7c48efb688c63e42000b57e">__list_find_sem_info_by_key</a> (<a class="el" href="mentos_2inc_2sys_2types_8h.html#a99c5bd20241a4a2708237037a1857062">key_t</a> key)</td></tr>
<tr class="memdesc:a2e4ed0c4d7c48efb688c63e42000b57e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches for the semaphore with the given key.  <a href="sem_8c.html#a2e4ed0c4d7c48efb688c63e42000b57e">More...</a><br /></td></tr>
<tr class="separator:a2e4ed0c4d7c48efb688c63e42000b57e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bb5ab8adbf77b1cf36dcbb81c78dd44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a5bb5ab8adbf77b1cf36dcbb81c78dd44">__list_add_sem_info</a> (<a class="el" href="structsem__info__t.html">sem_info_t</a> *sem_info)</td></tr>
<tr class="memdesc:a5bb5ab8adbf77b1cf36dcbb81c78dd44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the structure to the global list.  <a href="sem_8c.html#a5bb5ab8adbf77b1cf36dcbb81c78dd44">More...</a><br /></td></tr>
<tr class="separator:a5bb5ab8adbf77b1cf36dcbb81c78dd44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f1651b6a95ee9f6a2d9f88a2d210c9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a12f1651b6a95ee9f6a2d9f88a2d210c9">__list_remove_sem_info</a> (<a class="el" href="structsem__info__t.html">sem_info_t</a> *sem_info)</td></tr>
<tr class="memdesc:a12f1651b6a95ee9f6a2d9f88a2d210c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the structure from the global list.  <a href="sem_8c.html#a12f1651b6a95ee9f6a2d9f88a2d210c9">More...</a><br /></td></tr>
<tr class="separator:a12f1651b6a95ee9f6a2d9f88a2d210c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a230c511deddc939808c88030f1b461e3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a230c511deddc939808c88030f1b461e3">sem_init</a> (void)</td></tr>
<tr class="memdesc:a230c511deddc939808c88030f1b461e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iinitializes the semaphore system.  <a href="sem_8c.html#a230c511deddc939808c88030f1b461e3">More...</a><br /></td></tr>
<tr class="separator:a230c511deddc939808c88030f1b461e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47b4422801eb7051dcf824d7ef876335"><td class="memItemLeft" align="right" valign="top"><a id="a47b4422801eb7051dcf824d7ef876335"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>sys_semget</b> (<a class="el" href="mentos_2inc_2sys_2types_8h.html#a99c5bd20241a4a2708237037a1857062">key_t</a> key, int nsems, int semflg)</td></tr>
<tr class="separator:a47b4422801eb7051dcf824d7ef876335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b5a11addcc4e4a8398579ce34eb94dd"><td class="memItemLeft" align="right" valign="top"><a id="a1b5a11addcc4e4a8398579ce34eb94dd"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>sys_semop</b> (int semid, struct sembuf *sops, unsigned nsops)</td></tr>
<tr class="separator:a1b5a11addcc4e4a8398579ce34eb94dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e93197fa3640c2bac69edbad1370214"><td class="memItemLeft" align="right" valign="top"><a id="a5e93197fa3640c2bac69edbad1370214"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>sys_semctl</b> (int semid, int semnum, int cmd, union semun *arg)</td></tr>
<tr class="separator:a5e93197fa3640c2bac69edbad1370214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8837e7b312471d561589032a796fab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stddef_8h.html#a831c6b6852c6d34448e30a88c34539fd">ssize_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a2d8837e7b312471d561589032a796fab">procipc_sem_read</a> (<a class="el" href="structvfs__file__t.html">vfs_file_t</a> *file, char *buf, <a class="el" href="stddef_8h.html#a97ae9c9688da2790e5d5a8fa2751881e">off_t</a> offset, <a class="el" href="stddef_8h.html#acf18a0d6c4b39d531e021702e9a77984">size_t</a> nbyte)</td></tr>
<tr class="memdesc:a2d8837e7b312471d561589032a796fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read function for the proc system.  <a href="sem_8c.html#a2d8837e7b312471d561589032a796fab">More...</a><br /></td></tr>
<tr class="separator:a2d8837e7b312471d561589032a796fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9b598cbbae80869ce476feb4c74e87ad"><td class="memItemLeft" align="right" valign="top"><a id="a9b598cbbae80869ce476feb4c74e87ad"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a9b598cbbae80869ce476feb4c74e87ad">__sem_id</a> = 0</td></tr>
<tr class="memdesc:a9b598cbbae80869ce476feb4c74e87ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">A value to compute the semid value. <br /></td></tr>
<tr class="separator:a9b598cbbae80869ce476feb4c74e87ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a525d290f9693a3b5cbe6a846bfcc80aa"><td class="memItemLeft" align="right" valign="top"><a id="a525d290f9693a3b5cbe6a846bfcc80aa"></a>
list_head&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sem_8c.html#a525d290f9693a3b5cbe6a846bfcc80aa">semaphores_list</a></td></tr>
<tr class="memdesc:a525d290f9693a3b5cbe6a846bfcc80aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of all current active semaphores. <br /></td></tr>
<tr class="separator:a525d290f9693a3b5cbe6a846bfcc80aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section copyright"><dt>Copyright</dt><dd>(c) 2014-2024 This file is distributed under the MIT License. See LICENSE.md for details.</dd></dl>
<h1><a class="anchor" id="autotoc_md32"></a>
03/04/2023</h1>
<p>At the moment we have various functions with their description (see comments). The first time that the function semget is called, we are going to generate the list and the first semaphore set with the assumption that we are not given a IPC_PRIVATE key (temporary ofc). We are able to create new semaphores set and generate unique keys (IPC_PRIVATE) with a counter that searches for the first possible key to assign. Temporary idea:</p><ul>
<li>IPC_CREAT flag, it should be working properly, it creates a semaphore set with the given key.</li>
<li>IPC_EXCL flag, it should be working properly, it returns -1 and sets the errno if the key is already used.</li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
11/04/2023</h1>
<p>Right now we have a first version of working semaphores in MentOS. We have completed the semctl function and we have implemented the first version of the semop function both user and kernel side. The way it works is pretty straightforward, the user tries to perform an operation and based on the value of the semaphore the kernel returns certain values. If the operation cannot be performed then the user will stay in a while loop. The cycle ends with a positive return value (the operation has been taken care of) or in case of errors. For testing purposes -&gt; you can try the t_semget and the t_sem1 tests. They both use semaphores and blocking / non blocking operations. t_sem1 is also an exercise that was assingned by Professor Drago in the OS course. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5bb5ab8adbf77b1cf36dcbb81c78dd44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bb5ab8adbf77b1cf36dcbb81c78dd44">&#9670;&nbsp;</a></span>__list_add_sem_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __list_add_sem_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsem__info__t.html">sem_info_t</a> *&#160;</td>
          <td class="paramname"><em>sem_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds the structure to the global list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem_info</td><td>the structure to add. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adcc8cd2b2c56a6e77efa89dec3441698"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc8cd2b2c56a6e77efa89dec3441698">&#9670;&nbsp;</a></span>__list_find_sem_info_by_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structsem__info__t.html">sem_info_t</a>* __list_find_sem_info_by_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>semid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches for the semaphore with the given id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">semid</td><td>the id we are searching. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the semaphore with the given id. </dd></dl>

</div>
</div>
<a id="a2e4ed0c4d7c48efb688c63e42000b57e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4ed0c4d7c48efb688c63e42000b57e">&#9670;&nbsp;</a></span>__list_find_sem_info_by_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structsem__info__t.html">sem_info_t</a>* __list_find_sem_info_by_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mentos_2inc_2sys_2types_8h.html#a99c5bd20241a4a2708237037a1857062">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches for the semaphore with the given key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the key we are searching. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the semaphore with the given key. </dd></dl>

</div>
</div>
<a id="a12f1651b6a95ee9f6a2d9f88a2d210c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12f1651b6a95ee9f6a2d9f88a2d210c9">&#9670;&nbsp;</a></span>__list_remove_sem_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __list_remove_sem_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsem__info__t.html">sem_info_t</a> *&#160;</td>
          <td class="paramname"><em>sem_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the structure from the global list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem_info</td><td>the structure to remove. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01bb52ef0602dd7096c0d08390018cc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01bb52ef0602dd7096c0d08390018cc4">&#9670;&nbsp;</a></span>__sem_info_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structsem__info__t.html">sem_info_t</a>* __sem_info_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="mentos_2inc_2sys_2types_8h.html#a99c5bd20241a4a2708237037a1857062">key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nsems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>semflg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocates the memory for semaphore management structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>IPC_KEY associated with the set of semaphores. </td></tr>
    <tr><td class="paramname">nsems</td><td>number of semaphores to initialize. </td></tr>
    <tr><td class="paramname">semflg</td><td>flags used to create the set of semaphores. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the allocated semaphore management structure. </dd></dl>

</div>
</div>
<a id="a08d8b376ba8ab75543b6264ce0e3fe10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08d8b376ba8ab75543b6264ce0e3fe10">&#9670;&nbsp;</a></span>__sem_info_dealloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __sem_info_dealloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsem__info__t.html">sem_info_t</a> *&#160;</td>
          <td class="paramname"><em>sem_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees the memory of a semaphore management structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem_info</td><td>pointer to the semaphore management structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d8837e7b312471d561589032a796fab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d8837e7b312471d561589032a796fab">&#9670;&nbsp;</a></span>procipc_sem_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stddef_8h.html#a831c6b6852c6d34448e30a88c34539fd">ssize_t</a> procipc_sem_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvfs__file__t.html">vfs_file_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#a97ae9c9688da2790e5d5a8fa2751881e">off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#acf18a0d6c4b39d531e021702e9a77984">size_t</a>&#160;</td>
          <td class="paramname"><em>nbyte</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read function for the proc system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>The file. </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer where the read content must be placed. </td></tr>
    <tr><td class="paramname">offset</td><td>Offset from which we start reading from the file. </td></tr>
    <tr><td class="paramname">nbyte</td><td>The number of bytes to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of red bytes. </dd></dl>

</div>
</div>
<a id="a230c511deddc939808c88030f1b461e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a230c511deddc939808c88030f1b461e3">&#9670;&nbsp;</a></span>sem_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sem_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iinitializes the semaphore system. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, 1 on failure. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
