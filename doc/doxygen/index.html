<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MentOS: MentOS (Mentoring Operating System)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MentOS
   &#160;<span id="projectnumber">0.7.3</span>
   </div>
   <div id="projectbrief">The Mentoring Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MentOS (Mentoring Operating System) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__home_enrico_repository_personal_mentos_README"></a> <a href="https://forthebadge.com"><img src="https://forthebadge.com/images/badges/built-with-love.svg" alt="forthebadge" style="pointer-events: none;" class="inline"/></a> <a href="https://forthebadge.com"><img src="https://forthebadge.com/images/badges/made-with-c.svg" alt="forthebadge" style="pointer-events: none;" class="inline"/></a> <a href="https://forthebadge.com"><img src="https://forthebadge.com/images/badges/for-you.svg" alt="forthebadge" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://github.com/mentos-team/MentOS/actions/workflows/ubuntu.yml"><img src="https://github.com/mentos-team/MentOS/actions/workflows/ubuntu.yml/badge.svg" alt="Ubuntu" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Table of Contents</h1>
<ul>
<li><a href="#mentos-mentoring-operating-system">MentOS (Mentoring Operating System)</a><ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#what-is-mentos">What is MentOS</a></li>
<li><a href="#implemented-features">Implemented features</a></li>
<li><a href="#prerequisites">Prerequisites</a><ul>
<li><a href="#installing-the-prerequisites">Installing the prerequisites</a></li>
</ul>
</li>
<li><a href="#compiling-mentos">Compiling MentOS</a></li>
<li><a href="#generating-the-ext2-filesystem">Generating the EXT2 filesystem</a></li>
<li><a href="#running-mentos">Running MentOS</a></li>
<li><a href="#running-mentos-from-grub">Running MentOS from GRUB</a></li>
<li><a href="#running-and-adding-new-programs-to-mentos">Running and adding new programs to MentOS</a><ul>
<li><a href="#create-a-new-program">Create a new program</a></li>
<li><a href="#add-the-new-program-to-the-list-of-compiled-sources">Add the new program to the list of compiled sources</a></li>
<li><a href="#running-a-program-or-a-test">Running a program or a test</a></li>
</ul>
</li>
<li><a href="#kernel-logging">Kernel logging</a></li>
<li><a href="#change-the-scheduling-algorithm">Change the scheduling algorithm</a></li>
<li><a href="#debugging-the-kernel">Debugging the kernel</a></li>
<li><a href="#contributors">Contributors</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
What is MentOS</h1>
<p>MentOS (Mentoring Operating System) is an open source educational operating system. The goal of MentOS is to provide a project environment that is realistic enough to show how a real Operating System work, yet simple enough that students can understand and modify it in significant ways.</p>
<p>There are so many operating systems, why did we write MentOS? It is true, there are a lot of education operating system, BUT how many of them follow the guideline de fined by Linux?</p>
<p>MentOS aims to have the same Linux's data structures and algorithms. It has a well-documented source code, and you can compile it on your laptop in a few seconds!</p>
<p>If you are a beginner in Operating-System developing, perhaps MentOS is the right operating system to start with.</p>
<p>Parts of MentOS are inherited or inspired by a similar educational operating system called <a href="https://github.com/dreamos82/DreamOs">DreamOs</a> written by Ivan Gualandri.</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Implemented features</h1>
<p>Follows the list of implemented features:</p>
<p><b>Processes and Events</b></p><ul>
<li>[x] Memory protection (User vs Kernel);</li>
<li>[x] Processes;</li>
<li>[x] Scheduler (synchronous and asynchronous);</li>
<li>[x] Interrupts and Exceptions;</li>
<li>[x] Signals;</li>
<li>[x] Timers and RTC;</li>
<li>[x] Wait-queues;</li>
<li>[x] System Calls;</li>
<li>[ ] Multi-core;</li>
</ul>
<p><b>Memory</b></p><ul>
<li>[x] Paging;</li>
<li>[x] Buddy System;</li>
<li>[x] Slab Allocation;</li>
<li>[x] Zone Allocator;</li>
<li>[x] Cache Allocator;</li>
<li>[x] Heap;</li>
<li>[x] Virtual Addressing;</li>
</ul>
<p><b>Filesystem</b></p><ul>
<li>[x] Virtual Filesystem (VFS);</li>
<li>[x] Initramfs;</li>
<li>[x] EXT2;</li>
<li>[x] Procfs;</li>
</ul>
<p><b>Input/Output</b></p><ul>
<li>[x] Programmable Interrupt Controller (PIC) drivers;</li>
<li>[x] Keyboard drivers (IT/ENG layouts);</li>
<li>[x] Video drivers;</li>
<li>[ ] VGA drivers;</li>
</ul>
<p><b>Inter-Process Communication (IPC)</b></p><ul>
<li>[X] Semaphore</li>
<li>[ ] Message queue</li>
<li>[ ] Shared memory</li>
<li>[ ] Named pipe</li>
</ul>
<p>I will try to keep it updated...</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Prerequisites</h1>
<p>MentOS is compatible with the main <b>unix-based</b> operating systems. It has been tested with <em>Ubuntu</em>, and under Windows with <em>WSL1</em> and <em>WSL2</em>.</p>
<p>For <b>compiling</b> the system we need:</p>
<ul>
<li>git</li>
<li>gcc</li>
<li>nasm</li>
<li>make</li>
<li>cmake</li>
<li>ccmake (suggested)</li>
<li>e2fsprogs (should be already installed)</li>
</ul>
<p>Under <b>MacOS</b>, for compiling, you have additional dependencies:</p>
<ul>
<li>i386-elf-binutils</li>
<li>i386-elf-gcc</li>
</ul>
<p>For <b>executing</b> the operating system we need:</p>
<ul>
<li>qemu-system-i386 (or qemu-system-x86)</li>
</ul>
<p>For <b>debugging</b> we suggest using:</p>
<ul>
<li>gdb or cgdb</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Installing the prerequisites</h2>
<p>Under <b>Ubuntu</b>, you can type the following commands:</p>
<div class="fragment"><div class="line">sudo apt-get update &amp;&amp; sudo apt-get upgrade -y</div>
<div class="line">sudo apt-get install -y git build-essential nasm make cmake cmake-curses-gui e2fsprogs</div>
<div class="line">sudo apt-get install -y qemu-system-x86</div>
<div class="line">sudo apt-get install -y gdb cgdb</div>
</div><!-- fragment --><p> Note: Older versions might have <code>qemu-system-i386</code> instead of <code>qemu-system-x86</code>.</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Compiling MentOS</h1>
<p>Compile MentOS with:</p>
<div class="fragment"><div class="line">cd &lt;clone_directory&gt;</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --><p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md7"></a>
Generating the EXT2 filesystem</h1>
<p>Generate the EXT2 filesystem with:</p>
<div class="fragment"><div class="line">make filesystem</div>
</div><!-- fragment --><p> you just need to generate the filesystem once. If you change a <code>program</code> you need to re-generate the entire filesystem with <code>make filesystem</code>, but this will override any changes you made to the files inside the <code>rootfs.img</code>. In the future I will find a way to update just the <code>/usr/bin</code> directory and the programs.</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md8"></a>
Running MentOS</h1>
<p>Boot MentOS with qemu:</p>
<div class="fragment"><div class="line">make qemu</div>
</div><!-- fragment --><p>To login, use one of the usernames listed in <code>files/etc/passwd</code>.</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md9"></a>
Running MentOS from GRUB</h1>
<p>For booting MentOS from GRUB in QEMU we need the following tools:</p>
<ul>
<li>xorriso</li>
<li>grub-mkrescue (from grub-common)</li>
</ul>
<p>We also need <code>grub-pc-bin</code>, otherwise GRUB won't start in QEMU.</p>
<p>Which can be installed in Ubuntu with the following command: </p><div class="fragment"><div class="line">sudo apt-get update &amp;&amp; sudo apt-get upgrade -y</div>
<div class="line">sudo apt-get install -y grub-common grub-pc-bin xorriso</div>
</div><!-- fragment --><p>Boot MentOS with qemu through GRUB by calling:</p>
<div class="fragment"><div class="line">make qemu-grub</div>
</div><!-- fragment --><p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md10"></a>
Running and adding new programs to MentOS</h1>
<p>This section explains how to add a new program to MentOS, and also how to run programs in mentos. It also explains how to add new tests, which are located in the <code>programs/tests</code> folder.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Create a new program</h2>
<p>Head to the <code>programs</code> (or the <code>programs/tests</code>) folder. Create and open a new program, for instance a file called <code>hello_world.c</code>, with your preferred editor, and add this content to the file: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="stdio_8h.html">stdio.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="mentos_2src_2klib_2vsprintf_8c.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Hello, World!\n\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="amentos_2src_2klib_2vsprintf_8c_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="mentos_2src_2klib_2vsprintf_8c.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div><div class="ttdoc">Write formatted output to stdout.</div><div class="ttdef"><b>Definition:</b> vsprintf.c:698</div></div>
<div class="ttc" id="astdio_8h_html"><div class="ttname"><a href="stdio_8h.html">stdio.h</a></div><div class="ttdoc">Standard I/0 functions.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Add the new program to the list of compiled sources</h2>
<p>Now we can add the program to the list of files which are compiled and placed inside MentOS filesystem. The following procedure is the same for both <code>programs</code> and <code>programs/tests</code>, what changes is which <code>CMakeLists.txt</code> file we modify.</p>
<p>You need to modify the <code>CMakeLists.txt</code> file, either <code>programs/CMakeLists.txt</code> or <code>programs/tests/CMakeLists.txt</code>, and add your program to the list of files to be compiled: </p><div class="fragment"><div class="line"># Add the executables (manually).</div>
<div class="line">set(PROGRAMS</div>
<div class="line">    init.c</div>
<div class="line">    ...</div>
<div class="line">    hello_world.c</div>
<div class="line">)</div>
</div><!-- fragment --><p> or </p><div class="fragment"><div class="line"># Add the executables (manually).</div>
<div class="line">set(TESTS</div>
<div class="line">    t_mem.c</div>
<div class="line">    ...</div>
<div class="line">    hello_world.c</div>
<div class="line">)</div>
</div><!-- fragment --><p>That's it, the <code>hello_world.c</code> file will be compiled and will appear inside the <code>/bin</code> or <code>/bin/tests</code> folder of MentOS.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Running a program or a test</h2>
<p>Once you login into MentOS, if you placed your source code in <code>programs</code>, you can execute the program by simply typing: </p><div class="fragment"><div class="line">hello_world</div>
</div><!-- fragment --><p> because the file resides in <code>/bin</code>, and that folder is listed in the <code>PATH</code> environment variable.</p>
<p>Now, if you placed your source code inside the <code>programs/tests</code> folder, the executable will end up inside the <code>/bin/tests</code> folder. However, the <code>/bin/tests</code> folder is not listed in <code>PATH</code>, so, if you want to execute a test from that folder you need to specify the full path: </p><div class="fragment"><div class="line">/bin/tests/hello_world</div>
</div><!-- fragment --><p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md14"></a>
Kernel logging</h1>
<p>The kernel provides ways of printing logging messages <em>from</em> inside the kernel code <em>to</em> the bash where you executed the <code>make qemu</code>.</p>
<p>These <em>logging</em> functions are: </p><div class="fragment"><div class="line"><span class="preprocessor">#define pr_emerg(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_alert(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_crit(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_err(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_warning(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_notice(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_info(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_debug(...)</span></div>
<div class="line"><span class="preprocessor">#define pr_default(...)</span></div>
</div><!-- fragment --><p>You use them like you would use a <code>printf</code>: </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (fd &lt; 0) {</div>
<div class="line">    <a class="code" href="debug_8h.html#aff10e9b3594e088ce07388ca38c89496">pr_err</a>(<span class="stringliteral">&quot;Failed to open file &#39;%s&#39;, received file descriptor %d.\n&quot;</span>, filename, fd);</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="ttc" id="adebug_8h_html_aff10e9b3594e088ce07388ca38c89496"><div class="ttname"><a href="debug_8h.html#aff10e9b3594e088ce07388ca38c89496">pr_err</a></div><div class="ttdeci">#define pr_err(...)</div><div class="ttdoc">Prints an error message.</div><div class="ttdef"><b>Definition:</b> debug.h:86</div></div>
</div><!-- fragment --><p>By default only message that goes from <code>pr_notice</code> included down to <code>pr_emerg</code> are displayed.</p>
<p>Each logging function (they are actually macros) is a wrapper that automatically sets the desired <b>log level</b>. Each log level is identified by a number, and declared as follows: </p><div class="fragment"><div class="line"><span class="preprocessor">#define LOGLEVEL_DEFAULT (-1) </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_EMERG   0    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_ALERT   1    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_CRIT    2    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_ERR     3    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_WARNING 4    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_NOTICE  5    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_INFO    6    </span></div>
<div class="line"><span class="preprocessor">#define LOGLEVEL_DEBUG   7    </span><span class="comment">///&lt; debug-level messages.</span></div>
</div><!-- fragment --><p>You can change the logging level by including the following lines at the beginning of your source code: </p><div class="fragment"><div class="line"><span class="comment">// Include the kernel log levels.</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="kernel__levels_8h.html">sys/kernel_levels.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#define __DEBUG_HEADER__ &quot;[ATA   ]&quot;</span></div>
<div class="line"><span class="preprocessor">#define __DEBUG_LEVEL__ LOGLEVEL_INFO</span></div>
<div class="line"><span class="comment">// Include the debuggin header.</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">io/debug.h</a>&quot;</span></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div><div class="ttdoc">Debugging primitives.</div></div>
<div class="ttc" id="akernel__levels_8h_html"><div class="ttname"><a href="kernel__levels_8h.html">kernel_levels.h</a></div></div>
</div><!-- fragment --><p> This example sets the <code>__DEBUG_LEVEL__</code>, so that all the messages from <code>INFO</code> and below are shown. While <code>__DEBUG_HEADER__</code> is just a string that is automatically prepended to your message, helping you identifying from which code the message is coming from.</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md15"></a>
Change the scheduling algorithm</h1>
<p>MentOS supports scheduling algorithms for aperiodic:</p>
<ul>
<li>Round-Robin (RR)</li>
<li>Highest Priority</li>
<li>Completely Fair Scheduling (CFS)</li>
<li>Aperiodic Earliest Deadline First (AEDF)</li>
</ul>
<p>It also supports periodic algorithms:</p>
<ul>
<li>Earliest Deadline First (EDF)</li>
<li>Rate Monotonic (RM)</li>
</ul>
<p>If you want to change the scheduling algorithm, to Round-Robin (RR) for instance:</p>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake -DSCHEDULER_TYPE=SCHEDULER_RR ..</div>
<div class="line">make</div>
<div class="line">make qemu</div>
</div><!-- fragment --><p>or you can activate one of the others:</p>
<div class="fragment"><div class="line"># Highest Priority</div>
<div class="line">cmake -DSCHEDULER_TYPE=SCHEDULER_PRIORITY ..</div>
<div class="line"># Completely Fair Scheduling (CFS)</div>
<div class="line">cmake -DSCHEDULER_TYPE=SCHEDULER_CFS      ..</div>
<div class="line"># Earliest Deadline First (EDF)</div>
<div class="line">cmake -DSCHEDULER_TYPE=SCHEDULER_EDF      ..</div>
<div class="line"># Rate Monotonic (RM)</div>
<div class="line">cmake -DSCHEDULER_TYPE=SCHEDULER_RM       ..</div>
<div class="line"># Aperiodic Earliest Deadline First (AEDF)</div>
<div class="line">cmake -DSCHEDULER_TYPE=SCHEDULER_AEDF     ..</div>
</div><!-- fragment --><p>Otherwise you can use <code>ccmake</code>:</p>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">ccmake ..</div>
</div><!-- fragment --><p>Now you should see something like this:</p>
<div class="fragment"><div class="line">BUILD_DOCUMENTATION              ON</div>
<div class="line">CMAKE_BUILD_TYPE</div>
<div class="line">CMAKE_INSTALL_PREFIX             /usr/local</div>
<div class="line">DEBUGGING_TYPE                   DEBUG_STDIO</div>
<div class="line">ENABLE_BUDDY_SYSTEM              OFF</div>
<div class="line">SCHEDULER_TYPE                   SCHEDULER_RR</div>
</div><!-- fragment --><p>Select SCHEDULER_TYPE, and type Enter to scroll the three available algorithms (SCHEDULER_RR, SCHEDULER_PRIORITY, SCHEDULER_CFS, SCHEDULER_EDF, SCHEDULER_RM, SCHEDULER_AEDF). Afterwards, you need to</p>
<div class="fragment"><div class="line">&lt;press c&gt;</div>
<div class="line">&lt;press g&gt;</div>
<div class="line">make</div>
<div class="line">make qemu</div>
</div><!-- fragment --><p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md16"></a>
Debugging the kernel</h1>
<p>If you want to use GDB to debug MentOS, first you need to compile everything:</p>
<div class="fragment"><div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">make</div>
</div><!-- fragment --><p>Then, you need to generate a file called <code>.gdbinit</code> placed inside the <code>build</code> directory, which will tell <b>gdb</b> which <em>object</em> file he needs to read in order to allow proper debugging. Basically, it provides for each binary file, the location of their <code>.text</code> section. To generate the file, just execute: </p><div class="fragment"><div class="line">make gdbinit</div>
</div><!-- fragment --><p>Finally, you run qemu in debugging mode with: </p><div class="fragment"><div class="line">make qemu-gdb</div>
</div><!-- fragment --><p>If you did everything correctly, you should see an empty QEMU window. Basically, QEMU is waiting for you to connect <em>remotely</em> with gdb. Anyway, running <code>make qemu-gdb</code> will make your current shell busy, you cannot call <code>gdb</code> in it. You need to open a new shell inside the <code>build</code> folder and do a: </p><div class="fragment"><div class="line">gdb --quiet --command=gdb.run</div>
</div><!-- fragment --><p> or </p><div class="fragment"><div class="line">cgdb --quiet --command=gdb.run</div>
</div><!-- fragment --><p>Now you should have in front of you:</p><ol type="1">
<li>the QEMU window waiting for you;</li>
<li>the <b>first</b> shell where you ran <code>make qemu-gdb</code>, which is also waiting for you;</li>
<li>the <b>second</b> shell where <code>gdb</code> is runnign and, you guessed it, is waiting for you.</li>
</ol>
<p>By default I placed a breakpoint at the begginning of (1) the <em>bootloader</em> and (2) the <em>kernel</em> itself.</p>
<p>So, when gdb starts you need to first give a continue: </p><div class="fragment"><div class="line">(gdb) continue</div>
</div><!-- fragment --><p>This will make the kernel run, and stop at the <b>first</b> breakpoint which is inside the <em>bootloader</em>: </p><div class="fragment"><div class="line">Breakpoint 1, boot_main (...) at .../mentos/src/boot.c:220</div>
<div class="line">220     {</div>
</div><!-- fragment --><p>giving a second <code>continue</code> will get you to the start of the operating system:</p>
<p>This will make the kernel run, and stop at the <b>second</b> breakpoint which is inside the <em>kernel</em>: </p><div class="fragment"><div class="line">Breakpoint 2, kmain (...) at .../mentos/src/kernel.c:95</div>
<div class="line">95      {</div>
</div><!-- fragment --><p>There is also a launch configuration for vscode in <code>.vscode/launch.json</code>, called <code>(gdb) Attach</code>, which should allow you to connect to the running process.</p>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em></p>
<h1><a class="anchor" id="autotoc_md17"></a>
Contributors</h1>
<p>Project Manager:</p>
<ul>
<li><a href="https://github.com/Galfurian">Enrico Fraccaroli</a></li>
</ul>
<p>Developers:</p><ul>
<li><a href="https://github.com/alessandroDanese88">Alessandro Danese</a>, <a href="https://github.com/luigicapogrosso">Luigi Capogrosso</a>, <a href="https://github.com/mircodemarchi">Mirco De Marchi</a><ul>
<li>Protection ring</li>
<li>libc</li>
</ul>
</li>
<li>Andrea Cracco<ul>
<li>Buddy System, Heap, Paging, Slab, Caching, Zone</li>
<li>Process Image, ELF</li>
<li>VFS: procfs</li>
<li>Bootloader</li>
</ul>
</li>
<li>Linda Sacchetto, Marco Berti<ul>
<li>Real time scheduler</li>
</ul>
</li>
<li>Daniele Nicoletti, Filippo Ziche<ul>
<li>Real time scheduler (Asynchronous EDF)</li>
<li>Soft IRQs</li>
<li>Timer</li>
<li>Signals</li>
</ul>
</li>
<li>And many other valuable contributors<ul>
<li><a href="https://github.com/rouseabout">rouseabout</a></li>
<li><a href="https://github.com/seekbytes">seekbytes</a></li>
<li><a href="https://github.com/fischerling">fischerling</a></li>
</ul>
</li>
</ul>
<p><em><a href="#table-of-contents">Back to the Table of Contents</a></em> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
